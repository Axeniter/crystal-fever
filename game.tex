\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[english, russian]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{parskip}
\setlength{\parskip}{1em}
\setlength{\parindent}{0pt}

\begin{document}

\section{Концепция игры}
\subsection{Завязка}
Однажды в магическом мире, в далеких горах прошла дуэль между 
двумя могущественными магами. Их заклинания были настолько мощны, 
что после их битвы, в горах образовалась зона повышенного 
магического воздействия. Из-за больших всплесков магии начали 
образовываться аномалии --- шахты заполонили странные светящиеся 
кристаллы. Слухи об этом быстро распространились среди 
обитателей магического мира. Самые смелые авантюристы, 
жаждующие исследовать природу таинственных кристаллов, 
отправились в далекие горы, ведомые кристальной лихорадкой. 
Вскоре выяснилось, что обстановка крайне нестабильна --- 
магических частиц в горах накопилось столько, что вскоре 
произойдет неизбежный эфирный взрыв, который сотрёт всё 
до чего дотянется, поэтому всем нужно будет покинуть горы 
и вывезти кристаллы за день до взрыва. Теперь перед 
авантюристами стоит задача --- накопить как можно больше 
кристаллов ко дню отправки.
\subsection{Игра}
Кристальная лихорадка --- это безкоалиционная неантагонистическая 
стратегическая игра для $N$-го числа игроков, на $T$ ходов, 
воплощающая конкурентную борьбу за ресурсы.
\subsubsection{Цель}
Цель каждого игрока получить как можно больше кристаллов 
ко дню отправки, тоесть накопить максимум очков к 
последнему ходу $T$.
\subsubsection{Игрок}
Каждый игрок владеет складом с кристаллами и набором юнитов.
\subsubsection{Юниты}
Рабочий --- каждый рабочий стабильно приносит +1 кристалл за ход.

Воин --- может либо атаковать вражеский склад, чтобы забрать кристаллы,
либо остаться защищать свой склад. Если воин стоит на охране, 
он может отбить атаку одного вражеского воина. 
Если воин атакует, и больше нет вражеских охранников, 
которые могли бы его остановить, то он атакует склад 
противника и крадёт из него 1 кристалл. 
Если в момент атаки склада, в нём 0 кристаллов, 
то воин разрушает склад, а игрок выбывает из игры. 
Если одного игрока атакует несколько игроков, то воины 
нападают по очереди по одному от каждого игрока в порядке 
номеров игроков, тоесть если на игрока $P_{3}$ напали 
2 воина игрока $P_{1}$ и 3 воина игрока $P_{2}$, то воины 
будут атаковать в порядке: $i_{p_{1}},i_{p_{2}},
i_{p_{1}},i_{p_{2}},i_{p_{2}}$, где $i_{pj}$ ---
воин $j$-того игрока.

Начальная стоимость каждого типа юнита равна 1. 
С каждой покупкой юнита определенного типа, цена на 
юнит этого типа возврастает на 1. Цена не сбрасывается 
на новом ходу, и сохраняется для последующих ходов.
\subsubsection{Старт}
Вначале игрокам даётся $S$ кристаллов и возможность купить 
стартовых юнитов, после чего начинается основная игра.
\subsubsection{Основная игра}
Игра состоит из последовательных ходов, в которых все игроки 
действуют синхронно. Каждый ход делится на три фазы:

1. Фаза приказов --- игроки распределяют своих воинов, 
определяя команду для каждого воина --- отправить его на 
конкретного врага, либо оставить на охране.

2. Фаза реализации --- происходит выполнение всех приказов. 
Разрешаются все бои и начисляется добыча за них. 
Начисляются кристаллы за каждого рабочего.

3. Фаза найма --- каждому игроку дана возможность приобрести 
юнитов. Игрок может как отказаться от покупки, так и купить 
любое число юнитов каждого типа, ограниченное только 
ресурсами игрока.

\section{Математическая формализация}
\subsection{Формализация игры}
\subsubsection{Основа}
В игре учавствует N игроков. Обозначим список игроков:
$$
P = \{1, 2, \dots, N\}, \quad N \geq 2
$$
Игра состоит из $T$ последовательных ходов. Конкретный ход обозначается
через $t$:
$$
t = 1, 2, \dots, T
$$
\subsubsection{Произвольный ход}
Рассмотрим игру в рамках одного произовльного хода t.

Состояние игрока $i$ на начало хода $t$ описывается вектором:
$$
state_i^t = (v_i^t, w_i^t, r_i^t)
$$
где:
\begin{itemize}
\item $v_i^t \in \mathbb{Z}_{\ge 0}$ --- количество кристаллов
\item $w_i^t \in \mathbb{Z}_{\ge 0}$ --- количество воинов
\item $r_i^t \in \mathbb{Z}_{\ge 0}$ --- количество рабочих
\end{itemize}

Тогда состояние игры на ходу t описывается вектором состояний
всех игроков на начало хода t:
$$
G^t=(state_1^t, state_2^t, \dots, state_N^t)
$$

1. Фаза приказов

Игрок распределяет своих воинов $w_i^t$:
$$
order^t_{i} = (a^t_{i,1},a^t_{i,2},\dots,a^t_{i,N}) \in D^t_{order,i}
$$
где:
\begin{itemize}
    \item $a_{ij}^t \in \mathbb{Z}_{\ge 0}$ — количество воинов,
    отправленных для атаки игрока $j$, если $j \neq i$, или оставленных
    для защиты, если $j = i$
    \item Выполняется ограничение: $\sum_{j \in P} a_{ij}^t = w_i^t$
\end{itemize}

2. Фаза реализации

\end{document}